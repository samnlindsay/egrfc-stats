<!DOCTYPE html>

<html>
<head>
<style>
    #vis.vega-embed {
      width: 100%;
      display: flex;
    }

    #vis.vega-embed details,
    #vis.vega-embed details summary {
      position: relative;
    }
  

      /* Default size for larger screens */
      .vega-embed {
          width: 100%;
          height: 100%;
          transform-origin: top left;
      }

      /* Scale for tablet devices */
      @media (max-width: 768px) {
          .vega-embed {
              transform: scale(0.75);
              width: 100%;
              height: 100%;
          }
      }

      /* Scale for mobile devices */
      @media (max-width: 480px) {
          .vega-embed {
              transform: scale(0.5);
              width: 100%;
              height: 100%;
          }
      }

      .vega-bindings {
        border: 2px solid black;
        background-color: #e5e4e7;
        color: #202946;
        width: fit-content;
        height: fit-content;
        position: static;
        display: block;
        justify-content: center;
        gap: 20px;
        padding: 10px;
        font-size: large;
      }
      .chart-wrapper {
          display: grid;
          grid-template-columns: 1fr 1fr; /* Chart takes 3x space, form takes 1x */
      }

      .vega-bind {
        font-family: 'Lato', sans-serif;
        padding: 10px;
        padding-top: 5px;
        width: min-content;
      }
            
      .vega-bind-name {
        font-family: 'Lato', sans-serif;
        font-weight: bold;
        font-size: larger;
        color: #202946; 
      }

      .vega-bind-radio input {
        width: 1rem;
        height: 1rem;
      }

      .vega-bind-radio label {
        font-family: 'Lato', sans-serif;
        display: flex;
        padding: 0.1rem;
        cursor: pointer;
        transition: all 0.3s;
        font-size: medium;
      }

      .vega-bind-radio input:checked+label {
        background-color: #202946;
        color: #e5e4e7;
    }
  </style>
<script src="https://cdn.jsdelivr.net/npm/vega@5" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5.17.0" type="text/javascript"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6" type="text/javascript"></script>
<link href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900" rel="stylesheet"/></head>
<body>
<div id="vis"></div>
<script>
    (function(vegaEmbed) {
      var spec = {"config": {"axis": {"labelFont": "Lato, sans-serif", "titleFont": "PT Sans Narrow, Helvetica Neue, Helvetica, Arial, sans-serif", "labelFontSize": 13, "titleFontSize": 24, "gridColor": "#202947", "gridOpacity": 0.2}, "header": {"labelFont": "PT Sans Narrow, Helvetica Neue, Helvetica, Arial, sans-serif", "titleFont": "PT Sans Narrow, Helvetica Neue, Helvetica, Arial, sans-serif", "labelFontSize": 24, "titleFontSize": 28, "labelFontWeight": "bold", "orient": "left"}, "legend": {"labelFont": "Lato, sans-serif", "titleFont": "PT Sans Narrow, Helvetica Neue, Helvetica, Arial, sans-serif", "labelFontSize": 14, "titleFontSize": 16, "titlePadding": 5, "fillColor": "white", "strokeColor": "black", "padding": 10, "titleFontWeight": "lighter", "titleFontStyle": "italic", "titleColor": "gray", "offset": 10}, "title": {"font": "PT Sans Narrow, Helvetica Neue, Helvetica, Arial, sans-serif", "fontSize": 48, "fontWeight": "bold", "anchor": "start", "align": "center", "titlePadding": 20, "subtitlePadding": 10, "subtitleFontWeight": "lighter", "subtitleFontSize": 13, "subtitleColor": "", "subtitleFontStyle": "italic", "offset": 15, "color": "black"}, "axisX": {"labelAngle": 0}, "facet": {"title": null, "header": null, "align": {"row": "each", "column": "each"}}, "resolve": {"scale": {"y": "independent", "facet": "independent"}}, "background": "#20294710"}, "vconcat": [{"data": {"name": "df", "url": "https://raw.githubusercontent.com/samnlindsay/egrfc-stats/main/data/lineouts.csv", "format": {"type": "csv"}}, "facet": {"column": {"field": "Season", "header": {"labelColor": "#20294688", "labelFontSize": 40, "labels": true, "title": null}, "type": "nominal"}}, "spec": {"layer": [{"layer": [{"mark": {"type": "bar", "opacity": 0.8, "stroke": "black"}, "encoding": {"color": {"field": "Numbers", "legend": null, "scale": {"domain": ["4", "5", "6", "7"], "range": ["#ca0020", "#f4a582", "#92c5de", "#0571b0"]}, "type": "nominal"}, "opacity": {"condition": {"param": "param_1", "value": 0.8, "empty": true}, "value": 0.2}, "strokeWidth": {"condition": {"param": "param_1", "value": 1.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Numbers", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Numbers", "sort": ["4", "5", "6", "7"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "name": "view_1", "transform": [{"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Numbers", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Numbers!=''"}]}, {"mark": {"type": "text", "align": "center", "baseline": "bottom", "dy": -5, "strokeWidth": 1}, "encoding": {"color": {"field": "Numbers", "legend": null, "scale": {"domain": ["4", "5", "6", "7"], "range": ["#ca0020", "#f4a582", "#92c5de", "#0571b0"]}, "type": "nominal"}, "opacity": {"condition": {"param": "param_1", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "SuccessText", "type": "nominal"}, "tooltip": [{"field": "Numbers", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Numbers", "sort": ["4", "5", "6", "7"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Numbers", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Numbers!=''"}]}]}, {"layer": [{"mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_1", "value": 0.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Numbers", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Numbers", "sort": ["4", "5", "6", "7"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "name": "view_2", "transform": [{"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Numbers", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Numbers!=''"}]}, {"mark": {"type": "point", "fillOpacity": 1.0, "filled": true, "size": 50, "stroke": "black"}, "encoding": {"color": {"field": "Numbers", "legend": null, "type": "nominal"}, "opacity": {"condition": {"param": "param_1", "value": 0.8, "empty": true}, "value": 0.2}, "tooltip": [{"field": "Numbers", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Numbers", "sort": ["4", "5", "6", "7"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Numbers", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Numbers!=''"}]}, {"mark": {"type": "text", "fontSize": 14, "yOffset": -15}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_1", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "Success", "format": ".0%", "type": "quantitative"}, "tooltip": [{"field": "Numbers", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Numbers", "sort": ["4", "5", "6", "7"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Numbers", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Numbers!=''"}]}]}], "height": 300, "width": 250}, "resolve": {"scale": {"x": "shared"}}, "title": {"text": "Numbers", "anchor": "middle", "color": "#20294688", "fontSize": 72, "offset": 30, "orient": "left"}, "transform": [{"filter": "datum.Squad == param_8"}]}, {"data": {"name": "df", "url": "https://raw.githubusercontent.com/samnlindsay/egrfc-stats/main/data/lineouts.csv", "format": {"type": "csv"}}, "facet": {"column": {"field": "Season", "header": {"labelColor": "#20294688", "labelFontSize": 40, "labels": false, "title": null}, "type": "nominal"}}, "spec": {"layer": [{"layer": [{"mark": {"type": "bar", "opacity": 0.8, "stroke": "black"}, "encoding": {"color": {"field": "Area", "legend": null, "scale": {"domain": ["Front", "Middle", "Back"], "range": ["#981515", "orange", "#146f14"]}, "type": "nominal"}, "opacity": {"condition": {"param": "param_2", "value": 0.8, "empty": true}, "value": 0.2}, "strokeWidth": {"condition": {"param": "param_2", "value": 1.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Area", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Area", "sort": ["Front", "Middle", "Back"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "name": "view_3", "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Area", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Area!=''"}]}, {"mark": {"type": "text", "align": "center", "baseline": "bottom", "dy": -5, "strokeWidth": 1}, "encoding": {"color": {"field": "Area", "legend": null, "scale": {"domain": ["Front", "Middle", "Back"], "range": ["#981515", "orange", "#146f14"]}, "type": "nominal"}, "opacity": {"condition": {"param": "param_2", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "SuccessText", "type": "nominal"}, "tooltip": [{"field": "Area", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Area", "sort": ["Front", "Middle", "Back"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Area", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Area!=''"}]}]}, {"layer": [{"mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_2", "value": 0.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Area", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Area", "sort": ["Front", "Middle", "Back"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "name": "view_4", "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Area", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Area!=''"}]}, {"mark": {"type": "point", "fillOpacity": 1.0, "filled": true, "size": 50, "stroke": "black"}, "encoding": {"color": {"field": "Area", "legend": null, "type": "nominal"}, "opacity": {"condition": {"param": "param_2", "value": 0.8, "empty": true}, "value": 0.2}, "tooltip": [{"field": "Area", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Area", "sort": ["Front", "Middle", "Back"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Area", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Area!=''"}]}, {"mark": {"type": "text", "fontSize": 14, "yOffset": -15}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_2", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "Success", "format": ".0%", "type": "quantitative"}, "tooltip": [{"field": "Area", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Area", "sort": ["Front", "Middle", "Back"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Area", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Area!=''"}]}]}], "height": 300, "width": 250}, "resolve": {"scale": {"x": "shared"}}, "title": {"text": "Area", "anchor": "middle", "color": "#20294688", "fontSize": 72, "offset": 30, "orient": "left"}, "transform": [{"filter": "datum.Squad == param_8"}]}, {"data": {"name": "df", "url": "https://raw.githubusercontent.com/samnlindsay/egrfc-stats/main/data/lineouts.csv", "format": {"type": "csv"}}, "facet": {"column": {"field": "Season", "header": {"labelColor": "#20294688", "labelFontSize": 40, "labels": false, "title": null}, "type": "nominal"}}, "spec": {"layer": [{"layer": [{"mark": {"type": "bar", "opacity": 0.8, "stroke": "black"}, "encoding": {"color": {"field": "Hooker", "legend": null, "scale": {"scheme": "tableau20"}, "type": "nominal"}, "opacity": {"condition": {"param": "param_3", "value": 0.8, "empty": true}, "value": 0.2}, "strokeWidth": {"condition": {"param": "param_3", "value": 1.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Hooker", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Hooker", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "name": "view_5", "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Hooker", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Hooker!=''"}]}, {"mark": {"type": "text", "align": "center", "baseline": "bottom", "dy": -5, "strokeWidth": 1}, "encoding": {"color": {"field": "Hooker", "legend": null, "scale": {"scheme": "tableau20"}, "type": "nominal"}, "opacity": {"condition": {"param": "param_3", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "SuccessText", "type": "nominal"}, "tooltip": [{"field": "Hooker", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Hooker", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Hooker", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Hooker!=''"}]}]}, {"layer": [{"mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_3", "value": 0.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Hooker", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Hooker", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "name": "view_6", "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Hooker", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Hooker!=''"}]}, {"mark": {"type": "point", "fillOpacity": 1.0, "filled": true, "size": 50, "stroke": "black"}, "encoding": {"color": {"field": "Hooker", "legend": null, "type": "nominal"}, "opacity": {"condition": {"param": "param_3", "value": 0.8, "empty": true}, "value": 0.2}, "tooltip": [{"field": "Hooker", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Hooker", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Hooker", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Hooker!=''"}]}, {"mark": {"type": "text", "fontSize": 14, "yOffset": -15}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_3", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "Success", "format": ".0%", "type": "quantitative"}, "tooltip": [{"field": "Hooker", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Hooker", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Hooker", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Hooker!=''"}]}]}], "height": 300, "width": 250}, "resolve": {"scale": {"x": "independent"}}, "title": {"text": "Hooker", "anchor": "middle", "color": "#20294688", "fontSize": 72, "offset": 30, "orient": "left"}, "transform": [{"filter": "datum.Squad == param_8"}]}, {"data": {"name": "df", "url": "https://raw.githubusercontent.com/samnlindsay/egrfc-stats/main/data/lineouts.csv", "format": {"type": "csv"}}, "facet": {"column": {"field": "Season", "header": {"labelColor": "#20294688", "labelFontSize": 40, "labels": false, "title": null}, "type": "nominal"}}, "spec": {"layer": [{"layer": [{"mark": {"type": "bar", "opacity": 0.8, "stroke": "black"}, "encoding": {"color": {"field": "Jumper", "legend": null, "scale": {"scheme": "tableau20"}, "type": "nominal"}, "opacity": {"condition": {"param": "param_4", "value": 0.8, "empty": true}, "value": 0.2}, "strokeWidth": {"condition": {"param": "param_4", "value": 1.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Jumper", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Jumper", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "name": "view_7", "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Jumper", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Jumper!=''"}]}, {"mark": {"type": "text", "align": "center", "baseline": "bottom", "dy": -5, "strokeWidth": 1}, "encoding": {"color": {"field": "Jumper", "legend": null, "scale": {"scheme": "tableau20"}, "type": "nominal"}, "opacity": {"condition": {"param": "param_4", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "SuccessText", "type": "nominal"}, "tooltip": [{"field": "Jumper", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Jumper", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Jumper", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Jumper!=''"}]}]}, {"layer": [{"mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_4", "value": 0.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Jumper", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Jumper", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "name": "view_8", "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Jumper", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Jumper!=''"}]}, {"mark": {"type": "point", "fillOpacity": 1.0, "filled": true, "size": 50, "stroke": "black"}, "encoding": {"color": {"field": "Jumper", "legend": null, "type": "nominal"}, "opacity": {"condition": {"param": "param_4", "value": 0.8, "empty": true}, "value": 0.2}, "tooltip": [{"field": "Jumper", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Jumper", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Jumper", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Jumper!=''"}]}, {"mark": {"type": "text", "fontSize": 14, "yOffset": -15}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_4", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "Success", "format": ".0%", "type": "quantitative"}, "tooltip": [{"field": "Jumper", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Jumper", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Jumper", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Jumper!=''"}]}]}], "height": 300, "width": 250}, "resolve": {"scale": {"x": "independent"}}, "title": {"text": "Jumper", "anchor": "middle", "color": "#20294688", "fontSize": 72, "offset": 30, "orient": "left"}, "transform": [{"filter": "datum.Squad == param_8"}]}, {"data": {"name": "df", "url": "https://raw.githubusercontent.com/samnlindsay/egrfc-stats/main/data/lineouts.csv", "format": {"type": "csv"}}, "facet": {"column": {"field": "Season", "header": {"labelColor": "#20294688", "labelFontSize": 40, "labels": false, "title": null}, "type": "nominal"}}, "spec": {"layer": [{"layer": [{"mark": {"type": "bar", "opacity": 0.8, "stroke": "black"}, "encoding": {"color": {"field": "Setup", "legend": null, "scale": {"domain": ["A", "C", "H", "W"], "range": ["dodgerblue", "crimson", "midnightblue", "black"]}, "type": "nominal"}, "opacity": {"condition": {"param": "param_5", "value": 0.8, "empty": true}, "value": 0.2}, "strokeWidth": {"condition": {"param": "param_5", "value": 1.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Setup", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Setup", "sort": ["A", "C", "H", "W"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "name": "view_9", "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Setup", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Setup!=''"}]}, {"mark": {"type": "text", "align": "center", "baseline": "bottom", "dy": -5, "strokeWidth": 1}, "encoding": {"color": {"field": "Setup", "legend": null, "scale": {"domain": ["A", "C", "H", "W"], "range": ["dodgerblue", "crimson", "midnightblue", "black"]}, "type": "nominal"}, "opacity": {"condition": {"param": "param_5", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "SuccessText", "type": "nominal"}, "tooltip": [{"field": "Setup", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Setup", "sort": ["A", "C", "H", "W"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Setup", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Setup!=''"}]}]}, {"layer": [{"mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_5", "value": 0.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Setup", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Setup", "sort": ["A", "C", "H", "W"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "name": "view_10", "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Setup", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Setup!=''"}]}, {"mark": {"type": "point", "fillOpacity": 1.0, "filled": true, "size": 50, "stroke": "black"}, "encoding": {"color": {"field": "Setup", "legend": null, "type": "nominal"}, "opacity": {"condition": {"param": "param_5", "value": 0.8, "empty": true}, "value": 0.2}, "tooltip": [{"field": "Setup", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Setup", "sort": ["A", "C", "H", "W"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Setup", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Setup!=''"}]}, {"mark": {"type": "text", "fontSize": 14, "yOffset": -15}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_5", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "Success", "format": ".0%", "type": "quantitative"}, "tooltip": [{"field": "Setup", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Setup", "sort": ["A", "C", "H", "W"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Setup", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Setup!=''"}]}]}], "height": 300, "width": 250}, "resolve": {"scale": {"x": "shared"}}, "title": {"text": "Setup", "anchor": "middle", "color": "#20294688", "fontSize": 72, "offset": 30, "orient": "left"}, "transform": [{"filter": "datum.Squad == param_8"}]}, {"data": {"name": "df", "url": "https://raw.githubusercontent.com/samnlindsay/egrfc-stats/main/data/lineouts.csv", "format": {"type": "csv"}}, "facet": {"column": {"field": "Season", "header": {"labelColor": "#20294688", "labelFontSize": 40, "labels": false, "title": null}, "type": "nominal"}}, "spec": {"layer": [{"layer": [{"mark": {"type": "bar", "opacity": 0.8, "stroke": "black"}, "encoding": {"color": {"field": "Movement", "legend": null, "scale": {"domain": ["Dummy", "Move", "Jump"], "range": ["#981515", "#146f14", "black"]}, "type": "nominal"}, "opacity": {"condition": {"param": "param_6", "value": 0.8, "empty": true}, "value": 0.2}, "strokeWidth": {"condition": {"param": "param_6", "value": 1.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Movement", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Movement", "sort": ["Jump", "Move", "Dummy"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "name": "view_11", "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Movement", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Movement!=''"}]}, {"mark": {"type": "text", "align": "center", "baseline": "bottom", "dy": -5, "strokeWidth": 1}, "encoding": {"color": {"field": "Movement", "legend": null, "scale": {"domain": ["Dummy", "Move", "Jump"], "range": ["#981515", "#146f14", "black"]}, "type": "nominal"}, "opacity": {"condition": {"param": "param_6", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "SuccessText", "type": "nominal"}, "tooltip": [{"field": "Movement", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Movement", "sort": ["Jump", "Move", "Dummy"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Movement", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Movement!=''"}]}]}, {"layer": [{"mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_6", "value": 0.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Movement", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Movement", "sort": ["Jump", "Move", "Dummy"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "name": "view_12", "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Movement", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Movement!=''"}]}, {"mark": {"type": "point", "fillOpacity": 1.0, "filled": true, "size": 50, "stroke": "black"}, "encoding": {"color": {"field": "Movement", "legend": null, "type": "nominal"}, "opacity": {"condition": {"param": "param_6", "value": 0.8, "empty": true}, "value": 0.2}, "tooltip": [{"field": "Movement", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Movement", "sort": ["Jump", "Move", "Dummy"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Movement", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Movement!=''"}]}, {"mark": {"type": "text", "fontSize": 14, "yOffset": -15}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_6", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "Success", "format": ".0%", "type": "quantitative"}, "tooltip": [{"field": "Movement", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Movement", "sort": ["Jump", "Move", "Dummy"], "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_7", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Movement", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 0 & datum.Movement!=''"}]}]}], "height": 300, "width": 250}, "resolve": {"scale": {"x": "shared"}}, "title": {"text": "Movement", "anchor": "middle", "color": "#20294688", "fontSize": 72, "offset": 30, "orient": "left"}, "transform": [{"filter": "datum.Squad == param_8"}]}, {"data": {"name": "df", "url": "https://raw.githubusercontent.com/samnlindsay/egrfc-stats/main/data/lineouts.csv", "format": {"type": "csv"}}, "facet": {"column": {"field": "Season", "header": {"labelColor": "#20294688", "labelFontSize": 40, "labels": false, "title": null}, "type": "nominal"}}, "spec": {"layer": [{"layer": [{"mark": {"type": "bar", "opacity": 0.8, "stroke": "black"}, "encoding": {"color": {"field": "Call", "legend": null, "scale": {"domain": ["Yes", "No", "Snap", "A*", "C*", "A1", "H1", "C1", "W1", "A2", "H2", "C2", "W2", "A3", "H3", "C3", "W3", "Matlow", "Red", "Orange", "Plus", "Even +", "RD", "Even", "Odd", "Odd +", "Green +", "", "Green"], "range": ["#146f14", "#981515", "#981515", "orange", "orange", "#146f14", "#146f14", "#146f14", "#146f14", "#981515", "#981515", "#981515", "#981515", "orange", "orange", "orange", "orange", "#981515", "#981515", "#981515", "#981515", "#981515", "orange", "orange", "orange", "orange", "orange", "orange", "#146f14"]}, "type": "nominal"}, "opacity": {"condition": {"param": "param_7", "value": 0.8, "empty": true}, "value": 0.2}, "strokeWidth": {"condition": {"param": "param_7", "value": 1.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Call", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Call", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "name": "view_13", "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Call", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Call!=''"}]}, {"mark": {"type": "text", "align": "center", "baseline": "bottom", "dy": -5, "strokeWidth": 1}, "encoding": {"color": {"field": "Call", "legend": null, "scale": {"domain": ["Yes", "No", "Snap", "A*", "C*", "A1", "H1", "C1", "W1", "A2", "H2", "C2", "W2", "A3", "H3", "C3", "W3", "Matlow", "Red", "Orange", "Plus", "Even +", "RD", "Even", "Odd", "Odd +", "Green +", "", "Green"], "range": ["#146f14", "#981515", "#981515", "orange", "orange", "#146f14", "#146f14", "#146f14", "#146f14", "#981515", "#981515", "#981515", "#981515", "orange", "orange", "orange", "orange", "#981515", "#981515", "#981515", "#981515", "#981515", "orange", "orange", "orange", "orange", "orange", "orange", "#146f14"]}, "type": "nominal"}, "opacity": {"condition": {"param": "param_7", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "SuccessText", "type": "nominal"}, "tooltip": [{"field": "Call", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Call", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "left"}, "field": "Proportion", "scale": {"domain": [0, 1]}, "title": "Proportion", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Call", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Call!=''"}]}]}, {"layer": [{"mark": {"type": "line", "strokeWidth": 1}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_7", "value": 0.5, "empty": true}, "value": 0}, "tooltip": [{"field": "Call", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Call", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "name": "view_14", "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Call", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Call!=''"}]}, {"mark": {"type": "point", "fillOpacity": 1.0, "filled": true, "size": 50, "stroke": "black"}, "encoding": {"color": {"field": "Call", "legend": null, "type": "nominal"}, "opacity": {"condition": {"param": "param_7", "value": 0.8, "empty": true}, "value": 0.2}, "tooltip": [{"field": "Call", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Call", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Call", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Call!=''"}]}, {"mark": {"type": "text", "fontSize": 14, "yOffset": -15}, "encoding": {"color": {"value": "black"}, "opacity": {"condition": {"param": "param_7", "value": 0.8, "empty": true}, "value": 0.2}, "text": {"field": "Success", "format": ".0%", "type": "quantitative"}, "tooltip": [{"field": "Call", "type": "nominal"}, {"field": "SuccessTooltip", "title": "Success", "type": "nominal"}, {"field": "ProportionTooltip", "title": "Proportion", "type": "nominal"}], "x": {"field": "Call", "sort": {"field": "ID"}, "title": null, "type": "nominal"}, "y": {"axis": {"format": ".0%", "orient": "right"}, "field": "Success", "scale": {"domain": [0, 1]}, "title": "Success Rate", "type": "quantitative"}}, "transform": [{"filter": {"param": "param_1", "empty": true}}, {"filter": {"param": "param_2", "empty": true}}, {"filter": {"param": "param_3", "empty": true}}, {"filter": {"param": "param_4", "empty": true}}, {"filter": {"param": "param_5", "empty": true}}, {"filter": {"param": "param_6", "empty": true}}, {"aggregate": [{"op": "count", "as": "Total"}, {"op": "mean", "field": "Won", "as": "Success"}], "groupby": ["Call", "Season", "Squad"]}, {"joinaggregate": [{"op": "sum", "field": "Total", "as": "SeasonTotal"}], "groupby": ["Season", "Squad"]}, {"calculate": "datum.Total / datum.SeasonTotal", "as": "Proportion"}, {"calculate": "round(datum.Success * datum.Total)", "as": "Won"}, {"calculate": "format(datum.Success * datum.Total, '.0f') + ' / ' + format(datum.Total, '.0f')", "as": "SuccessText"}, {"calculate": "'Won ' + format(datum.Won, '.0f') + ' of ' + format(datum.Total, '.0f') + ' lineouts (' + format(datum.Success, '.0%') + ')'", "as": "SuccessTooltip"}, {"calculate": "datum.Total + ' of ' + datum.SeasonTotal + ' lineouts total (' + format(datum.Proportion, '.0%') + ')'", "as": "ProportionTooltip"}, {"window": [{"op": "row_number", "field": "", "as": "ID"}], "groupby": ["Season", "Squad"], "sort": [{"field": "Total", "order": "descending"}, {"field": "Success", "order": "descending"}]}, {"filter": "datum.Total >= 5 & datum.Call!=''"}]}]}], "height": 300, "width": 250}, "resolve": {"scale": {"x": "independent"}}, "title": {"text": "Call", "anchor": "middle", "color": "#20294688", "fontSize": 72, "offset": 30, "orient": "left"}, "transform": [{"filter": "datum.Squad == param_8"}]}], "params": [{"name": "param_1", "select": {"type": "point", "fields": ["Numbers"]}, "views": ["view_1"]}, {"name": "param_2", "select": {"type": "point", "fields": ["Area"]}, "views": ["view_3"]}, {"name": "param_3", "select": {"type": "point", "fields": ["Hooker"]}, "views": ["view_5"]}, {"name": "param_4", "select": {"type": "point", "fields": ["Jumper"]}, "views": ["view_7"]}, {"name": "param_5", "select": {"type": "point", "fields": ["Setup"]}, "views": ["view_9"]}, {"name": "param_6", "select": {"type": "point", "fields": ["Movement"]}, "views": ["view_11"]}, {"name": "param_7", "select": {"type": "point", "fields": ["Call"]}, "views": ["view_13"]}, {"name": "param_8", "bind": {"input": "radio", "options": ["1st", "2nd"], "name": "Squad"}, "value": "1st"}], "resolve": {"scale": {"color": "independent"}}, "title": {"text": "Lineout Success", "subtitle": ["Distribution of lineouts (bar), and success rate (line). Click to highlight and filter.", "Success is defined as being in possession when the lineout ends, and does not necessarily mean clean ball or perfect execution."]}, "$schema": "https://vega.github.io/schema/vega-lite/v5.17.0.json"};
      var embedOpt = {"mode": "vega-lite"};

      function showError(el, error){
          el.innerHTML = ('<div style="color:red;">'
                          + '<p>JavaScript Error: ' + error.message + '</p>'
                          + "<p>This usually means there's a typo in your chart specification. "
                          + "See the javascript console for the full traceback.</p>"
                          + '</div>');
          throw error;
      }
      const el = document.getElementById('vis');
      vegaEmbed("#vis", spec, embedOpt)
        .catch(error => showError(el, error));
    })(vegaEmbed);

  </script>
</body>
</html>